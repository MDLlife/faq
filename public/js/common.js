function setDefaultStates(){var e=$(".bottom-header__item:eq(0)"),t=e.attr("data-type");e.addClass("bottom-header__item_selected"),setVisibleContent(t),$(".country__select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var i=e.next("div.select-styled");i.text(e.children("option").eq(0).text());for(var s=$("<ul />",{class:"select-options"}).insertAfter(i),n=0;n<t;n++){var o=window.location.href,r=e.children("option").eq(n).text(),a=e.children("option").eq(n).val(),l='<li><a href="'+a+'">'+r+"</a></li>";$(l).appendTo(s),o===e.children("option").eq(n).val()&&i.text(e.children("option").eq(n).text())}var d=s.children("li");i.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),d.click(function(t){t.stopPropagation(),i.text($(this).text()).removeClass("active"),e.val($(this).attr("rel")),s.hide()}),$(document).click(function(){i.removeClass("active"),s.hide()})})}function setEvents(){$(".question").click(function(){$(this).hasClass("question_opened")?($(this).removeClass("question_opened"),$(".question").removeClass("question_opened")):($(".question").removeClass("question_opened"),$(this).addClass("question_opened"))}),$(window).scroll(function(){var e=$(".header"),t=$(".top-header"),i=$(".bottom-header"),s=e.height();$(window).scrollTop()>s?(t.addClass("top-header_sticky"),i.addClass("bottom-header_sticky")):(t.removeClass("top-header_sticky"),i.removeClass("bottom-header_sticky"))}),$(".bottom-header__item").click(function(){var e="bottom-header__item_selected",t=$(this).attr("data-type");$(this).hasClass(e)||($(".question").removeClass("question_opened"),setVisibleContent(t),$(".bottom-header__item").removeClass(e),$(this).addClass(e))})}function setVisibleContent(e){$(".question").each(function(){$(this).attr("data-type").indexOf(e)>-1?$(this).show():$(this).hide()})}!function(e){function t(e,t){t=t.replace(/\b(0(?!\b))+/g,"");var i=t.replace(/( |\(|\)|\.|\-)/g,"");return!(i.length>19||i.length<6)}function s(e){var t;return"dd/mm/yyyy"==o&&(t=/^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g),"dd-mm-yyyy"==o?t=/^(((0[1-9]|[12]\d|3[01])-(0[13578]|1[02])-((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)-(0[13456789]|1[012])-((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])-02-((19|[2-9]\d)\d{2}))|(29-02-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g:"mm-dd-yyyy"==o&&(t=/^(((0[13578]|1[02])-(0[1-9]|[12]\d|3[01])-((19|[2-9]\d)\d{2}))|((0[13456789]|1[012])-(0[1-9]|[12]\d|30)-((19|[2-9]\d)\d{2}))|(02-(0[1-9]|1\d|2[0-8])-((19|[2-9]\d)\d{2}))|(02-29-((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g),!!t.test(e)}function n(e,t){var i=t||window.event,s=i.keyCode||i.which;s=String.fromCharCode(s);var n=/[ +0-9()-]/;"date"==e&&(n=/[ 0-9-]/,e=0),(!n.test(s)||e>19)&&(i.returnValue=!1,s=i.keyCode,i.preventDefault&&9!=s&&8!=s&&i.preventDefault())}var o,r="sib";if(o=e("input[name='hdn_new_format']").length?"mm-dd-yyyy":"dd/mm/yyyy",e(".tooltip").css({left:"101%"}),e("#"+r+"_embed_signup ."+r+"-container").find(".hidden-btns").remove(),e("#"+r+"_embed_signup ."+r+"-container").find(".message_area").remove(),e("body").on("submit","#sib_embed_signup1 #theform1,#sib_embed_signup #theform",function(){var n=e(this);if(n.hasClass(r+"_processing"))return!1;var a=n.closest(".forms-builder-wrapper");a.find("#"+r+"_loading_gif_area").width(n.width()).height(n.height());var l=n.find("#req_hid").val();l="email"==("undefined"==a.find("#primary_type").val()?"email":a.find("#primary_type").val())?"email"+l:"SMS"+l;var d=l.split("~"),c=a.find("#"+r+"_embed_signup_lang").val(),p="Please complete this field.",h=a.find("#"+r+"_embed_invalid_email_message").val(),u="The SMS field must contain between 6 and 19 digits.",f="Invalid date format";for("fr"==c?(p="Merci de remplir ce champ.",u="Le champ SMS doit contenir entre 6 et 19 chiffres.",f="Date de format invalide"):"es"==c?(p="Por favor, complete este campo",u="El campo SMS debe contener entre 6 y 19 cifras.",f="Formato de fecha no válido"):"pt"==c?(p="Preencha este campo.",u="O campo SMS deve conter entre 6 e 19 dígitos.",f="O formato da data é inválido"):"it"==c?(p="Compilare questo campo.",u="Il campo SMS deve contenere dai 6 ai 19 caratteri.",f="Il formato della data non è valido"):"de"==c&&(p="Bitte füllen Sie dieses Feld aus.",u="Das SMS-Feld muss 6 bis 19 Ziffern enthalten.",f="Ungültiges Datumsformat"),n.find("div.alert").remove(),n.find(".message_area").remove(),i=0;i<d.length;i++){var v=n.find('input[name="'+d[i]+'"]'),m=v.attr("type");if("text"==m)""==v.val()||v.val()==p?(v.closest(".row").addClass("needsfilled"),v.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+p+"</div>")):"email"==d[i]?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(v.val())?v.closest(".row").removeClass("needsfilled"):(v.closest(".row").addClass("needsfilled"),v.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 15px;"><button type="button" class="close">x</button>'+h+"</div>"),v.val("")):"SMS"==d[i]&&e("#sms_prefix").length&&""==e("#sms_prefix").val()?(v.closest(".row").addClass("needsfilled"),v.closest(".row").append('<div class="alert alert-danger" style="width: '+alert_width+alert_padding+'"><button type="button" class="close" style="'+button_style+'">x</button>'+p+"</div>")):v.closest(".row").removeClass("needsfilled");else if("radio"==m)0==v.is(":checked")&&(v.closest(".row").addClass("needsfilled"),v.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+p+"</div>"));else if("Captcha"==d[i]&&"undefined"!=typeof grecaptcha){var b=grecaptcha.getResponse();0==b.length?(e(".captcha > div.row").addClass("needsfilled"),e(".captcha > div.row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;"><button type="button" class="close">x</button>'+p+"</div>")):e(".captcha > div.row").removeClass("needsfilled")}else{var g=v.serializeArray();0==g.length?v.closest(".row").addClass("needsfilled"):v.closest(".row").removeClass("needsfilled")}}if(e(".row").each(function(){var i=e(this).find("span"),n=e(this).find("input"),r=n.width()+10,a=e(this).find("#sms_prefix").length>0?e(this).find("#sms_prefix").val():"";"SMS"==n.attr("name")&&(t(n,a+n.val())||""==n.val()||(n.closest(".row").addClass("needsfilled"),n.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;width:'+r+';"><button type="button" class="close">x</button>'+u+"</div>"),n.val(""))),i.text()==o&&(s(n.val())||""==n.val()||(n.closest(".row").addClass("needsfilled"),n.closest(".row").append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442;margin-top: 5px;width:'+r+';"><button type="button" class="close">x</button>'+f+"</div>"),n.val("")))}),e("div.message_area button.close").on("click",function(){e(this).parent().remove()}),n.find("input").closest(".row").hasClass("needsfilled")||e(".captcha > div.row").hasClass("needsfilled"))return!1;var y=n.attr("action"),T=n.serialize();return n.addClass(r+"_processing"),n.parent().find("#"+r+"_loading_gif_area").show(),n.css("opacity","0.5"),e.ajax({url:y,data:T,dataType:"json",type:"POST",beforeSend:function(){},success:function(t){var i=e("."+r+"_processing");if(i.parent().find("#"+r+"_loading_gif_area").hide(),i.css("opacity","1"),void 0!=t.result){"success"==t.result.result||"emailExist"==t.result.result||"OK"==t.result.result||"OK_UPDATE"==t.result.result?(backColor="#dff0d8",borderColor="#d6e9c6",color="#ffffff",e(".sub-mob-alert").hide(),setTimeout(function(){e(".message_area").remove(),e(".sub-mob-alert").show()},3e3)):(backColor="#f2dede",borderColor="#ebccd1",color="#a94442");var s='<div class="message_area" style="background-color: '+backColor+";border:1px solid "+borderColor+"; color: "+color+'"><button type="button" class="close">x</button>';if("success"==t.result.result||"OK"==t.result.result){if(window.location.pathname.indexOf("ru")<0&&window.location.pathname.indexOf("zh")<0&&(s+="Awesome!<br>Now you are subscribed on MDL News"),window.location.pathname.indexOf("ru")>0&&(s+="Ура!<br>Теперь вы подписаны на MDL новости"),window.location.pathname.indexOf("zh")>0&&(s+="这么好！<br>现在您订阅MDL的新闻"),""!=t.result.smsExist){var n="",o=t.result.smsExist;n=t.result.smsExist_msg.split("[number]"),s+=". "+n[0]+o+n[1]}i.find("div.email-group input[type='text']").val(""),i.find("div.sms-group input[type='text']").val(""),""!=t.result.url_redirect&&(location.href=t.result.url_redirect)}else if("sms_emailExist"==t.result.result){var a="",l=t.result.emailExist;a=t.result.emailExist_msg.split("[address]"),s+=". "+a[0]+l+a[1]}else if("invalid_request"==t.result.result||"invalidEmail"==t.result.result)s+=t.result.invalid_err_msg;else if("invalidSms"==t.result.result)s+=t.result.invalidSms_msg;else if("emailExist"==t.result.result||"OK_UPDATE"==t.result.result){if(s+=t.result.exist_err_msg,""!=t.result.smsExist){var n="",o=t.result.smsExist;n=t.result.smsExist_msg.split("[number]"),s+=". "+n[0]+o+n[1]}}else"dateFormat"==t.result.result||"reqMiss"==t.result.result?s+=t.result.general_err_msg:"invalidCaptcha"==t.result.result&&(s+=t.result.general_err_msg);s+="</div>",i.find("."+r+"-container").prepend(s),e("div.message_area button.close").on("click",function(){e(this).parent().remove()}),i.removeClass(r+"_processing")}}}),!1}),e("#"+r+"_embed_signup :input").on("click",function(){e(this).closest(".row").hasClass("needsfilled")&&(e(this).closest(".row").find("div.message_area").remove(),e(this).val(""),"radio"==e(this).attr("type")&&e(this).val("1"),e(this).closest(".row").removeClass("needsfilled"))}),e("#"+r+"_embed_signup input[type=radio]").on("click",function(){e(this).closest(".row").hasClass("needsfilled")&&(e(this).attr("checked",!0),e(this).closest(".row").find("div.message_area").remove(),e(this).closest(".row").removeClass("needsfilled"))}),e("input").on("keypress",function(t){e(this).closest(".row").find("."+r+"_dateformat").length>0&&n("date",t)}),e("#SMS").on("keypress",function(t){n(e(this).val().length,t)}),e("input[type=number]").on("keypress",function(t){var i=t||window.event,s=i.keyCode||i.which;if(s=String.fromCharCode(s),!/[0-9]/.test(s)){i.returnValue=!1,s=i.keyCode,i.preventDefault&&9!=s&&8!=s&&i.preventDefault();var n=e(this).closest(".row"),o=n.closest(".forms-builder-wrapper").find("#"+r+"_embed_signup_lang").val(),a="Please enter a number.";"fr"==o?a="Veuillez entrer un nombre.":"es"==o?a="Please enter a number.":"pt"==o?a="Please enter a number.":"it"==o?a="Please enter a number.":"de"==o&&(a="Please enter a number."),n.find(".message_area").length||n.append('<div class="message_area" style="background-color: #f2dede;border:1px solid #ebccd1; color: #a94442"><button type="button" class="close">x</button>'+a+"</div>")}}),e(document).on("click",".message_area .close",function(){e(this).closest(".message_area").remove()}),e(document).on("click",".sib-dropdown-toggle.country-flg",function(){e(".country-block ul").toggle()}),e(document).on("click",".country-block ul li a",function(){var t=e(this).data("code"),i=e(this).data("c_code");e(".sib-dropdown-toggle .cflags").attr("class","cflags"),e(".sib-dropdown-toggle .cflags").addClass(i),e("#sms_prefix").val("+"+t),e(".country-block ul").hide()}),e(document).bind("click",function(t){e(t.target).parents().hasClass("country-block")||e(".country-block ul").hide()}),e(".sms_field .country-block").length){var a=e(".sib-dropdown-toggle .cflags").attr("class").split(" ");if(a[1]&&""!=a[1]){var l=e(".sib-dropdown-menu").find('[data-c_code="'+a[1]+'"]').data("code");e("#sms_prefix").val("+"+l)}else{e(".sib-dropdown-toggle .cflags").addClass("FR");var l=e(".sib-dropdown-menu").find('[data-c_code="FR"]').data("code");e("#sms_prefix").val("+"+l)}}e("#hdn_email_txt").val((new Date).getTime())}(jQuery),$(document).ready(function(){setDefaultStates(),setEvents()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.StickySidebar={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule?e.default:e}function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}var s=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,i(function(e,t){!function(e,i){i(t)}(0,function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),s=function(){var e=".stickySidebar",s={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1};return function(){function n(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,n),this.options=n.extend(s,o),this.sidebar="string"==typeof e?document.querySelector(e):e,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(e){i[e]=i[e].bind(i)}),this.initialize()}return i(n,[{key:"initialize",value:function(){var e=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var i=document.querySelectorAll(this.options.containerSelector);if(i=Array.prototype.slice.call(i),i.forEach(function(t,i){t.contains(e.sidebar)&&(e.container=t)}),!i.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+e,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var e=this.dimensions;e.containerTop=n.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerBottom=e.containerTop+e.containerHeight,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebarInner.offsetWidth,e.viewportHeight=window.innerHeight,e.maxTranslateY=e.containerHeight-e.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var e=this.dimensions;e.sidebarLeft=n.offsetRelative(this.sidebar).left,e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,e.viewportBottom=e.viewportTop+e.viewportHeight,e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,e.topSpacing=this.options.topSpacing,e.bottomSpacing=this.options.bottomSpacing,"function"==typeof e.topSpacing&&(e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0),"function"==typeof e.bottomSpacing&&(e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?e.topSpacing<e.lastTopSpacing&&(e.translateY+=e.lastTopSpacing-e.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&e.bottomSpacing<e.lastBottomSpacing&&(e.translateY+=e.lastBottomSpacing-e.bottomSpacing,this._reStyle=!0),e.lastTopSpacing=e.topSpacing,e.lastBottomSpacing=e.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var e=this.dimensions,t=e.viewportTop+e.topSpacing,i=this.affixedType;return t<=e.containerTop||e.containerHeight<=e.sidebarHeight?(e.translateY=0,i="STATIC"):i="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),e.translateY=Math.max(0,e.translateY),e.translateY=Math.min(e.containerHeight,e.translateY),e.translateY=Math.round(e.translateY),e.lastViewportTop=e.viewportTop,i}},{key:"_getAffixTypeScrollingDown",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,i=e.viewportTop+e.topSpacing,s=e.viewportBottom-e.bottomSpacing,n=this.affixedType;return this.isSidebarFitsViewport()?e.sidebarHeight+i>=e.containerBottom?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):i>=e.containerTop&&(e.translateY=i-e.containerTop,n="VIEWPORT-TOP"):e.containerBottom<=s?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):t+e.translateY<=s?(e.translateY=s-t,n="VIEWPORT-BOTTOM"):e.containerTop+e.translateY<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(n="VIEWPORT-UNBOTTOM"),n}},{key:"_getAffixTypeScrollingUp",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,i=e.viewportTop+e.topSpacing,s=e.viewportBottom-e.bottomSpacing,n=this.affixedType;return i<=e.translateY+e.containerTop?(e.translateY=i-e.containerTop,n="VIEWPORT-TOP"):e.containerBottom<=s?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||e.containerTop<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(n="VIEWPORT-UNBOTTOM"),n}},{key:"_getStyle",value:function(e){if(void 0!==e){var t={inner:{},outer:{}},i=this.dimensions;switch(e){case"VIEWPORT-TOP":t.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":t.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var s=this._getTranslate(0,i.translateY+"px");t.inner=s?{transform:s}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":t.outer={height:i.sidebarHeight,position:"relative"}}return t.outer=n.extend({height:"",position:""},t.outer),t.inner=n.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},t.inner),t}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1;var i=this.getAffixType(),s=this._getStyle(i);if((this.affixedType!=i||t)&&i){var o="affix."+i.toLowerCase().replace("viewport-","")+e;n.eventTrigger(this.sidebar,o),"STATIC"===i?n.removeClass(this.sidebar,this.options.stickyClass):n.addClass(this.sidebar,this.options.stickyClass);for(var r in s.outer){var a="number"==typeof s.outer[r]?"px":"";this.sidebar.style[r]=s.outer[r]+a}for(var l in s.inner){var d="number"==typeof s.inner[l]?"px":"";this.sidebarInner.style[l]=s.inner[l]+d}var c="affixed."+i.toLowerCase().replace("viewport-","")+e;n.eventTrigger(this.sidebar,c)}else this._initialized&&(this.sidebarInner.style.left=s.inner.left);this.affixedType=i}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),n.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,function(t){requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1})}(t.type))}},{key:"_setSupportFeatures",value:function(){var e=this.support;e.transform=n.supportTransform(),e.transform3d=n.supportTransform(!0)}},{key:"_getTranslate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+e+", "+t+", "+i+")":!!this.support.translate&&"translate("+e+", "+t+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+e,this);var t={inner:{},outer:{}};t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""};for(var i in t.outer)this.sidebar.style[i]=t.outer[i];for(var s in t.inner)this.sidebarInner.style[s]=t.inner[s];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(e){var t=!1,i=e?"perspective":"transform",s=i.charAt(0).toUpperCase()+i.slice(1),n=["Webkit","Moz","O","ms"],o=document.createElement("support"),r=o.style;return(i+" "+n.join(s+" ")+s).split(" ").forEach(function(e,i){if(void 0!==r[e])return t=e,!1}),t}},{key:"eventTrigger",value:function(e,t,i){try{var s=new CustomEvent(t,{detail:i})}catch(e){var s=document.createEvent("CustomEvent");s.initCustomEvent(t,!0,!0,i)}e.dispatchEvent(s)}},{key:"extend",value:function(e,t){var i={};for(var s in e)void 0!==t[s]?i[s]=t[s]:i[s]=e[s];return i}},{key:"offsetRelative",value:function(e){var t={left:0,top:0};do{var i=e.offsetTop,s=e.offsetLeft;isNaN(i)||(t.top+=i),isNaN(s)||(t.left+=s),e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return t}},{key:"addClass",value:function(e,t){n.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}},{key:"removeClass",value:function(e,t){n.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return s}}]),n}()}();e.default=s,window.StickySidebar=s})})),n=t(s);e.default=n,e.__moduleExports=s,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.StickySidebar={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule?e.default:e}function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}var s=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,i(function(e,t){!function(e,i){i(t)}(0,function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),s=function(){var e=".stickySidebar",s={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1};return function(){function n(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,n),this.options=n.extend(s,o),this.sidebar="string"==typeof e?document.querySelector(e):e,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(e){i[e]=i[e].bind(i)}),this.initialize()}return i(n,[{key:"initialize",value:function(){var e=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var i=document.querySelectorAll(this.options.containerSelector);if(i=Array.prototype.slice.call(i),i.forEach(function(t,i){t.contains(e.sidebar)&&(e.container=t)}),!i.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+e,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var e=this.dimensions;e.containerTop=n.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerBottom=e.containerTop+e.containerHeight,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebarInner.offsetWidth,e.viewportHeight=window.innerHeight,e.maxTranslateY=e.containerHeight-e.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var e=this.dimensions;e.sidebarLeft=n.offsetRelative(this.sidebar).left,e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,e.viewportBottom=e.viewportTop+e.viewportHeight,e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,e.topSpacing=this.options.topSpacing,e.bottomSpacing=this.options.bottomSpacing,"function"==typeof e.topSpacing&&(e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0),"function"==typeof e.bottomSpacing&&(e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?e.topSpacing<e.lastTopSpacing&&(e.translateY+=e.lastTopSpacing-e.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&e.bottomSpacing<e.lastBottomSpacing&&(e.translateY+=e.lastBottomSpacing-e.bottomSpacing,this._reStyle=!0),e.lastTopSpacing=e.topSpacing,e.lastBottomSpacing=e.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var e=this.dimensions,t=e.viewportTop+e.topSpacing,i=this.affixedType;return t<=e.containerTop||e.containerHeight<=e.sidebarHeight?(e.translateY=0,i="STATIC"):i="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),e.translateY=Math.max(0,e.translateY),e.translateY=Math.min(e.containerHeight,e.translateY),e.translateY=Math.round(e.translateY),e.lastViewportTop=e.viewportTop,i}},{key:"_getAffixTypeScrollingDown",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,i=e.viewportTop+e.topSpacing,s=e.viewportBottom-e.bottomSpacing,n=this.affixedType;return this.isSidebarFitsViewport()?e.sidebarHeight+i>=e.containerBottom?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):i>=e.containerTop&&(e.translateY=i-e.containerTop,n="VIEWPORT-TOP"):e.containerBottom<=s?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):t+e.translateY<=s?(e.translateY=s-t,n="VIEWPORT-BOTTOM"):e.containerTop+e.translateY<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(n="VIEWPORT-UNBOTTOM"),n}},{key:"_getAffixTypeScrollingUp",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,i=e.viewportTop+e.topSpacing,s=e.viewportBottom-e.bottomSpacing,n=this.affixedType;return i<=e.translateY+e.containerTop?(e.translateY=i-e.containerTop,n="VIEWPORT-TOP"):e.containerBottom<=s?(e.translateY=e.containerBottom-t,n="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||e.containerTop<=i&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(n="VIEWPORT-UNBOTTOM"),n}},{key:"_getStyle",value:function(e){if(void 0!==e){var t={inner:{},outer:{}},i=this.dimensions;switch(e){case"VIEWPORT-TOP":t.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":t.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var s=this._getTranslate(0,i.translateY+"px");t.inner=s?{transform:s}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":t.outer={height:i.sidebarHeight,position:"relative"}}return t.outer=n.extend({height:"",position:""},t.outer),t.inner=n.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},t.inner),t}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1;var i=this.getAffixType(),s=this._getStyle(i);if((this.affixedType!=i||t)&&i){var o="affix."+i.toLowerCase().replace("viewport-","")+e;n.eventTrigger(this.sidebar,o),"STATIC"===i?n.removeClass(this.sidebar,this.options.stickyClass):n.addClass(this.sidebar,this.options.stickyClass);for(var r in s.outer){var a="number"==typeof s.outer[r]?"px":"";this.sidebar.style[r]=s.outer[r]+a}for(var l in s.inner){var d="number"==typeof s.inner[l]?"px":"";this.sidebarInner.style[l]=s.inner[l]+d}var c="affixed."+i.toLowerCase().replace("viewport-","")+e;n.eventTrigger(this.sidebar,c)}else this._initialized&&(this.sidebarInner.style.left=s.inner.left);this.affixedType=i}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),n.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,function(t){requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1})}(t.type))}},{key:"_setSupportFeatures",value:function(){var e=this.support;e.transform=n.supportTransform(),e.transform3d=n.supportTransform(!0)}},{key:"_getTranslate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+e+", "+t+", "+i+")":!!this.support.translate&&"translate("+e+", "+t+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+e,this);var t={inner:{},outer:{}};t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""};for(var i in t.outer)this.sidebar.style[i]=t.outer[i];for(var s in t.inner)this.sidebarInner.style[s]=t.inner[s];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(e){var t=!1,i=e?"perspective":"transform",s=i.charAt(0).toUpperCase()+i.slice(1),n=["Webkit","Moz","O","ms"],o=document.createElement("support"),r=o.style;return(i+" "+n.join(s+" ")+s).split(" ").forEach(function(e,i){if(void 0!==r[e])return t=e,!1}),t}},{key:"eventTrigger",value:function(e,t,i){try{var s=new CustomEvent(t,{detail:i})}catch(e){var s=document.createEvent("CustomEvent");s.initCustomEvent(t,!0,!0,i)}e.dispatchEvent(s)}},{key:"extend",value:function(e,t){var i={};for(var s in e)void 0!==t[s]?i[s]=t[s]:i[s]=e[s];return i}},{key:"offsetRelative",value:function(e){var t={left:0,top:0};do{var i=e.offsetTop,s=e.offsetLeft;isNaN(i)||(t.top+=i),isNaN(s)||(t.left+=s),e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return t}},{key:"addClass",value:function(e,t){n.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}},{key:"removeClass",value:function(e,t){n.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return s}}]),n}()}();e.default=s,window.StickySidebar=s})})),n=t(s);e.default=n,e.__moduleExports=s,Object.defineProperty(e,"__esModule",{value:!0})});